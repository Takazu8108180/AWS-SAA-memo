# AWS-SAA-memo

---
tags:
    - 学習
---

# 学習方針
## メモの取り方
- 基本的に、模擬問題・確認問題で理解の浅いところをメモ
- 後に教材で確認し、メモを追記して理解を補強する

## AWS-SAA取得に向けて
1. 模擬テストを一通りやる
2. 間違ったところを復習しつつ、理解の浅いサービスを洗い出す
3. Udemyで理解の浅いサービスを重点的に学習
  1. 動画を一通り見る
  2. 総復習問題を解く
4. 再度模擬テスト(目標は10~15ミス)
  1.模擬問題1 ⏪
  2.模擬問題2
  3.模擬問題3
  4.模擬問題4
  (5.総復習問題1)
  (6.総復習問題2)
5. 外部Web問題集を買って解く

## 模擬問題点数メモ
- 模擬問題1
  - 1回目：39/65(60%) ❌
  - 2回目：52/65(80%) ⭕️
- 模擬問題2
  - 1回目：32/65(49%) ❌
  - 2回目：52/65(80%) ⭕️
- 模擬問題3
  - 1回目：33/65(50%) ❌
  - 2回目：58/65(89%) ⭕️
- 模擬問題4
  - 1回目：45/65(69%) ❌
  - 2回目：55/65(84%) ❌
- 総復習問題1
  - 1回目：118/184(64%) ❌
  - 2回目
- 総復習問題2
  - 1回目：62/106(58%) ❌
  - 2回目

## 重点確認リスト
- [✔︎] EBSのストレージタイプの特徴  
- [✔︎] S3（暗号化方式）、諸々再度がっつり復習した方が良さそう  
- [✔︎] DynamoDB  
- [✔︎] Cloud Front  
- [✔︎] Route53のレコードタイプ  
- [✔︎] AWS STS  
- [✔︎] ELBの主要機能
- [✔︎] S3データの解析について
- [✔︎] S3の静的Webホスティングの設定の適切な流れ

- [✔︎] Redshift  
- [✔︎] Storage Gateway  
- [] Amazon Config
- [✔︎] Amazon Kinesis
- [✔︎] EFS
- [✔︎] Data Sync


<!-- #################### -->

# サービス理解メモ

## コンピューティング

### EC2
- EC2 + AutoCScaling + ALBのアーキテクチャはすぐにイメージできるようにする！
#### ファミリータイプ
- 頭文字のアルファベット
- 汎用
  - A, M, T
  - バランス型
- コンピューティング最適化
  - C
  - 高パフォーマンスプロセッサが必要な場面（機械学習とか）
- メモリ最適化
  - X, R, ハイメモリ, z
  - メモリ内の大きなデータセットを処理するワークロードにおいて最適
  - インメモリデータベースをEC2で作る場合など
- ストレージ最適化
  - H, D, I
  - ローカルストレージの大規模データセットに対する高いシーエンシャル読み取り・書き込みアクセスを必要とするワークロード
  - IOPSのEBSと一緒に使うことでパフォーマンス発揮
- 高速コンピューティング
  - P, G, F
  -  GPUとかのCPUを使ってできる
  -  ブロックチェーンの計算処理とか、ゲーミングPCとか
#### 詳細設定
- ユーザデータ
  - Amazon EC2 インスタンスの起動設定時にユーザーデータを利用することで、インスタンス起動時にスクリプトを実行できる
  - 詳細設定の自動化
#### 購入プラン
- Saving plan
  - リザーブドだけ
  - 一定の使用量が決められている
  - 年間で契約するけど、その中でも決められた量だけ使用
- キャパシティー予約
  - キャパシティーの予約を事前に予約
  - 起動可能の確保
  - オンデマンドとリザーブドで予約できる
- リザーブドインスタンス
  - スタンダード
    - ファミリータイプ、OS、支払いオプションが変更できない
    - いらなくなったらマーケットプレイスで販売できる
  - コンパーティブル
    - 変更できる要素が多い
- スポットインスタンス
  - スポットフリーと
    - インスタンスタイプや入札価格を指定、自動で最安値のインスタンスを選択して起動
  - スポットインスタンスはバッチ処理ジョブなどの一時的な利用で使う
- EC2フリート
  - 複数のインスタンスタイプを選択してグループとして起動設定
#### 起動テンプレート
- 起動の詳細設定をテンプレート化できる
- Auto Scalingとかで利用
#### パブリックアクセス
- できない時の原因例
  - サブネットのパブリックIPの自動割り当て設定が有効化されていない
  - セキュリティグループやネットワークACLで適切な設定が施されていない
  - ネットワーク構成でミスがある
#### プレイスメントグループ
- 単一のアベイラビリティーゾーン内(異なるAZは不可)のインスタンスを論理的にグループ化したもの
- プレイスメントグループを使用することで、異なるAZ間や異なるリージョン間の通信よりも高速な処理が可能
- 例えば、EC2を複数作成した場合に、それぞれを個々にするのではなく1つの処理としてまとめる時に適用
- クラスタープレイスメントグループ
  - クラスタープレイスメントグループは、単一のアベイラビリティーゾーン内のインスタンスを論理的にグループ化する
  - また、グループ化したインスタンスは全て同じサーバーラックに格納されるためグループ内での通信は高速に行うことが出来る
  - 利用用途としては、**高速なネットワークが求められるアプリケーション**がある
- パーティションプレイスメントグループ
  - パーティションプレイスメントグループは、Amazon EC2のプレイスメントグループをパーティションと呼ばれる論理的なセグメントに分割してグループ化
  - パーティションごとに別々のサーバーラックに格納されるため、一つのハードウェアに障害が発生しても他のハードウェアでは稼働しているので、**ハードウェア障害に強い**
  - 分散処理環境をデプロイすることが出来るため、EC2を利用したHadoopなどの大規模な分散ワークロードを実現できる
- スプレッドプレイスメントグループ
  - プレイスメントグループ内のEC2をそれぞれ個別に別々のサーバーラックに格納
  - EC2インスタンスを同じリージョン内の複数のAZに分散して配置することができる
  - そのため、**AZ障害に強い構成を作成することが出来る**
  - グループでベイラビリティーゾーンごとに、最大7つの実行中のインスタンスを持つことができます。
#### 拡張ネットワーキング
- クラスタープレイスメントグループと一緒に使われることが多い
- 高い帯域幅のネットワークを確保できる
#### その他
- Elastic Network Interface
  - IPアドレスの移動
  - トラフィックの処理
- IAMデータベース認証
  - IAMロールを使用して設定
  - データベースのアクセスの際に、ID,パスワードを入力するのではなくて、IAMロールだけで入れる
  - EC2インスタンスが固有のプロファイル認証情報を利用してRDSデータベースにアクセスできるようにする
- Run Command
  - Windowsのコマンドをマネジメントコンソールから実行できる
- ハイバネーション 
  - **停止前の状態を維持しながら停止・再起動できる**
  - メモリ情報とか
- AMIを第三者のAWSアカウントとのみ共有できるようにAMIのLaunchPermissionプロパティを変更する


### Auto Scaling
- ELBでターゲットグループを作成して、そこにAutoScalingを指定
- ALBにアタッチする
#### 起動設定
- 起動テンプレート
  - より詳細なインスタンス性能の指定ができる
#### 構成
- 複数AZにまたがって指定するのが一般的
#### グループサイズの設定
- 希望する容量（Desired Capacity）
  - 手動でのスケーリング
- 最小キャパシティ
  - 削減する際の下限
- 最大キャパシティ
  - スケールアウト時の最大値
#### スケーリングポリシー
- スケーリング
  - 手動スケーリング
    - Desired capacityを設定することで、既存の Auto Scaling グループのサイズはいつでも手動で変更して、稼働するインスタンス数を増減させることができる
  - シンプル
    - CloudWatchのモニタリングメトリクスに応じて、正常なインスタンスを維持
  - ステップスケーリング
    - 予測されたトラフィックに対してスケールされるようスケーリング
    - バッチ処理は決まったタイミングで行うため相性がいい
  - ターゲットトラッキング
    - 平均メトリクスを維持
    - 望ましいパフォーマンスを維持できる
  - スケジューリング
    - 日時指定
#### 挙動
- インスタンス数の少ないところから起動
- 起動が成功するまで
- 分散の調整
- EC2のウォームアップ条件
  - ウォームアップが完了するまで、オートスケールの対象にならない
- うまく実行されずに２４時間経った場合は、自動的に停止する
#### ヘルスチェック
  - EC2ステータス
    - インスタンスがrunning状態以外の時は異常
  - ELB
    - ELBのヘルスチェック機能を利用
#### 終了ポリシー
- AZの選択
  - インスタンスの多いところ
  - 同量の場合はランダム
- 古いインスタンスから
- 最も新しいインスタンスから
- 課金が多いインスタンス
#### クールダウン期間
- スケールイン時にクールダウン時間を設定
- スケジュールされたスケーリングポリシーなどで例外もある
#### ライフサイクルフック
- 起動時・終了時にインスタンスを一時停止させてカスタムアクションを実施
- ログの保持とか、AMIの作成とか


### Lambda
- lambdaファンクションが一つの単位
- Java, Go, PowerShell, Python, Node.js, C#, Ruby
- タイムアウト時間
  - デフォルト3秒、最大15分
- 関数同時実行数
  - 最大1000
- ブループリント
  - サンプルコード
- 処理
  - 非同期と同期
- スケジュール機能
- ラムダレイヤ
  - 共通の処理をまとめられる
- URL Functions
  - API Gatewayを省略したパブリックに公開するAPIや、簡易な認証実装でも差し支えのないAPIをLambdaで実装することができる
- lambdaエッジ
  - CloudFrontと連携、エッジロケーションでデータ処理可能
- RDSとの連携
  - RDSプロキシを使って効率的なコネクションをはる


<!-- #################### -->

## ネットワーク

### VPC
- VPS間の接続方法
  - NAT（コスト高い）
  - VPCペアリング
  - PrivateLink
    - プライベートIPアドレスを使用してアクセスできる
- CIDR
  - 使用できないアドレス
    - ホストアドレス…　.0, .1, .2, .3, .255
- ゲートウェイ関連
  - カスタマーゲートウェイ
    - オンプレミス環境と接続する際に使用
  - 仮装プライベートゲートウェイ
    - VPN接続時に利用
- NATインスタンス
  - NATゲートウェイをユーザ側で柔軟に構築したい場合に利用
- VPCフローログ
  - ネットワークトラフィックを取得
  - CloudWatchでモニタリング
- IPフローティング
  - 障害発生時にダウンタイムをなくすために、Elastic IPを自動で付け替える


### Route53
#### 利用方法
- ドメインを設定（ドメインを購入して準備しておく）
- ドメイン名と同じホストゾーンを作成
- ホストゾーンにDNSレコードを作成
- トラフィックルーティングを設定
#### ホストゾーン
- ドメインとそのサブドメインのトラフィックのルーティングする方法についての情報を保持するコンテナ
- パブリック
  - インターネットに公開されたDNSドメインレコードを管理
- プライベート
  - VPSに閉じたネットワークのDNSドメインレコードの管理
#### レコードタイプ
- **DNSレコード（IPアドレスとホスト名を紐づける）**
- ドメイン名に何を関連づけるか
- CNAME
  - 特定のホスト名を別のドメイン名に転送するときなどに利用
- A
  - ホスト名とIPv4アドレスの関連付けを定義
- AAAA
  -  IPv6アドレスをドメインに関連付け
- MX
  - メールサーバーを定義
#### **エイリアスレコード**
- CloudFrontなどのAWSリソースをドメインと関連づける際に専用で使用する
- AかAAAAレコード
#### **ルーティングポリシー**
- シンプルルーティング
  - 設定された値に基づいて応答
- 位置情報
  - ユーザーのIPアドレスより位置情報を特定
  - 地域ごとに異なるレコードを返す
  - **地域制限ができる**
    - 地域に応じてコンテンツの内容を変える
- 地理的近接性
  - ユーザとリソースの場所に基づいてルールを作成しルーティング
  - トラフィックフロー（エディタ）を用いた複雑な設定
- 加重
  - 重み付けの高いエンドポイントに多くルーティング
- フェイルオーバールーティング
  - ヘルスチェックに基づいて利用可能なリソースに応答
- レイテンシールーティング
  - リージョンの遅延により
- 複数値回答ルーティング
  - Amazon Route 53 が DNS クエリに対する応答として複数の値 (ウェブサーバーの IP アドレスなど) を返すように設定できる
  - 複数値回答ルーティングは各リソースが正常かどうかも確認するため、Route 53 は正常なリソースに値のみを返すことができる
  - したがって、IPアドレス単位での正常・非正常を判断してルーティングすることができる
#### **フェールオーバー設定**
- ヘルスチェックを利用したフェールオーバルーティング
  - アクティブ・パッシブ構成
    - フェールオーバールーティングを利用
    - プライマリリソースをアクティブリソースとして利用
  - アクティブ・アクティブ構成
    - 複数のリソースをアクティブとしてルーティング
    - フェールオーバールーティング以外のルーティングポリシーにヘルスチェックを適用してラウンドロビンさせる
    - 設定された全リソースを平等に利用する
    - リソースが利用できなくなると、そのリソースを Route 53 が異常として検出し、以後、クエリへの応答に含めることを控える
#### TTL
- DNSリゾルバでレコードに関する情報をキャッシュして保持しておく時間を設定
- DNSリゾルバ
  - 自分の知っているDNSサーバへ問い合わせを行い、IPアドレスの割り出しを行う
  - 毎回名前解決しなくてもドメイン情報を把握することができる
  - 設定することで、呼び出し数を減らすことができる
#### その他
- DR（ディザスタリカバリ）構成
  - コールドスタンバイ
    - Amazon S3をバックアップデータの格納先として利用
    - 事前にシステムイメージをクラウド上に準備
    - 災害発生時にクラウド上のシステムを起動し、Route53で切り替えることで復旧
投資コストを抑えられ、手軽に始めることがで
  - ウォームスタンバイ
    - クラウドのスタンバイ環境にデータを常時レプリケーション
    - 通常は、スタンバイ環境を最少構成で稼働させ、災害発生時は必要なキャパシティに変更
    - スタンバイ環境の運用が常時必要になりますが、Route53でシステム切り替えを素早く実行することができる
- IPフローティング（VPC機能）
  - 障害発生時にダウンタイムをなくすためにElasticIPを稼働系インスタンスから待機系インスタンスに自動で付け替える


### グローバルアクセラレータ　
- とは ※要Check
  - クライアントとサーバーの通信にAWS専用のネットワークを使うので、通常のインターネット経由より速くなります
  - アプリケーションへのグローバルなアクセスを低遅延に改善するもの
  - AWSが用意する専用のネットワークを使用する
  - 静的IPアドレスを設定できる


### VPN
- Site-to-Site VPN
- サイト間VPNをAWSとオンプレミス間に構成
  - オンプレミス側のネットワークにおけるカスタマーゲートウェイを設定することが必要
  - カスタマーゲートウェイデバイスは、ユーザー側でオンプレミスネットワーク で所有または管理している物理アプライアンスまたはソフトウェアアプライアンス
  - これをAWS側の仮想プライベートゲートウェイに接続することで、サイト間VPNが接続できるようになります


### ELB
- ヘルスチェック
  - EC2インスタンスの正常・異常状態を確認して、トラフィックを振り分ける
- クロスゾーン負荷分散
  - EC2の負荷状態に応じて、複数AZにまたがるEC2への均等負荷分散を実行
- 暗号化通信
  - SSL/TLS証明書を設定して、HTTPS通信やTLS通信を実施
- スティッキーセッション
  - セッション中に同じユーザから来たリクエストを継続して同じEC2に送信する
- Connection Draining
  - インスタンスが登録解除または異常が発生した際に、そのバックエンドインスタンスへの新規リクエスト送信を中止する
- ログ取得
  - 有効化で、S3にログ取得
#### ALB
- レイヤー７対応、HTTP/HTTPS
- ポートを利用するECSとかでも利用可能
- リクエスト内容を確認して分散先を振り分けるコンテントベースルーティングができる
- URLのパスに基づいてルーティング可能なパスベースルーティングができる
  - ドメイン＋パスでバランシングが可能
- HTTPトラフィックとHTTPSトラフィックを別々に処理するALBのリクエストがすべてHTTPSを使用するように構成しなおすことためには、Application Load Balancer のリスナールールを使用して、HTTP リクエストを HTTPS にリダイレクトする設定を利用
#### NLB
- 高性能ロードバランサー
#### その他
- LBとEC2インスタンスとの通信にはHTTPのみが利用されることになる
- 


<!-- #################### -->

## ストレージ・データベース

### S3
#### ストレージクラス
- インテリジェント階層化
  - 標準と低頻度アクセスを自動で切り替えてくれる
  - アクセス頻度が未知のデータに対してコスパがいい
- Glacierのタイプ
  - Flexible Retrieval
    - 通常のGlacier
    - 通常取り出し3~5時間
    - 迅速取り出し1~5分
  - Instance Retrieval
    - ミリ秒単位の取り出し
  - Deep Archive
#### Transfer Acceleration
- リージョン間でのデータ移動
- アップロードの高速化
- S3バケットのデータを長距離からファイルの転送を高速、簡単、安全に行う
  - クライアントとバケット間の長距離アップロードを高速に行う
#### パブリックアクセス制御
- ブロックパグリックアクセス
  - 初期設定で有効化されている
  - 初期ではパブリックアクセスができない
#### ライフサイクルポリシー
- データのアーカイブや削除を自動で管理できる
- ライフサイクルは標準からdeep archiveへの一方向
#### 保存容量
- １オブジェクトあたり、5TBの最大保存サイズ
- Glacierの1つのアーカイブ最大サイズ 40TB
#### オブジェクト管理
- バージョニング
  - オブジェクトの世代管理
  - 削除したデータの回復ができる
  - 削除の際のMFA保護もできる
- オブジェクトロック
  - 既に入っているデータの削除や変更をすることができなくなる
#### リソースアクセス関連
- クロスオリジンリソースシェアリング
  - 別のサーバからのアクセスも許可する
  - 一つのwebサイトを複数のドメインで共有して利用
- ゲートウェイエンドポイント
  - インターネットを介さずにVPC外のAWSサービスに接続できる
  - VPCエンドポイントを割り当ててルーティングを設定する
- クロスアカウントアクセス
  - 別アカウントにバケットをシェアできる
  - 設定方式3つ
    - バケットポリシーとIAMポリシーによる許可
    - ACLとIAMポリシーによる許可(特定のオブジェクト)
    - IAMロールによる許可(AssumeRoleを利用)
- S3アクセスポイント
  - アクセス先に応じてアクセスポイントを作成してポリシーを適用してアクセス
- 静的webホスティング
  - URLはhttp://バケット名.s3-website.リージョン名.amazonaws.com
  - 設定の流れ
    - パブリックアクセスのブロックを無効化する
    - バケットポリシーでバケットの読み取り許可を設定する
    - インデックスドキュメントを保存
    - インデックスドキュメントの設定有効か
- Route53によるドメイン設定
  - エイリアスレコードのAタイプを利用
  - バケット名とドメイン名を同じにする
- オブジェクトキー名に日付などのプレフィックスを利用することで、アップロードを分散してリクエストパフォーマンスを自動的に向上できる
#### 読み取り性合成モデル
- 強い整合性
  - 登録後即時にデータ反映
  - 更新による齟齬は発生しない
  - 削除による齟齬は発生しない
#### 暗号化
- SSE-S3は最も手間をかけない
- KMSとCはユーザが自身で作成
- クライアントサイド暗号化は送信前にクライアント側で暗号化
- 有効にすることでログデータの暗号化も実施される
- 署名付きURLと署名付きクッキー
#### 利用コスト
- リージョン
- データ容量
- リクエストとデータ取得
- データ転送アウト
#### S3のアクセス管理
- IAMユーザポリシー…利用の権限を管理
- バケットポリシー…アクセス権を設定
- ACL…オブジェクトへも設定可能
- 事前署名付きURL…インターネット上の第三者へURLを閲覧させられるURLを持っているものだけがアクセスできる
#### バケットポリシーの内容
- プリンシパルは対象のIAMユーザーなどを指定
- コンディションは条件設定
#### S3イベント
- バケット内のイベント発生がトリガー
- SNS,SQS,Lambdaに通知設定可能
#### クロスリージョンレプリケーション
- 通常は同一のリーゾン内でのレプリケーションだが、有効にすると別のリージョンのS3に自動で複製される
- バケットに対するオブジェクトのCRUD操作をトリガー
- 冗長化
- バージョニング機能を有効にする必要
- 双方向レプリケーションも可能
#### データ解析
- S3 Select
  -  S3内でクエリ実行できる
- Amazon Athena
  -  簡単な分析
  -  SageMakerと組み合わせて推論もできる
- Amazon Macie
  - 機械学習による機密データの検出、分類、保護
- Amazon Redshift Spectrum
  - 核のデータに対して、Redshiftから直接クエリを実行できる機能
  - Redshidtの起動前提
- Amazon EMR
  - ビックデータ解析
  - 行動履歴やログデータの解析
- S3分析
  - アクセスパターンの分析
  - ライフサイクルポリシーに活かせる
- サーバーアクセスログでログを取得できる
- S3アクセスアナライザー
  - IAMアクセスアナライザーの機能を使って、ポリシー違反のアクセスがないか監視
- バッチオペレーション
  - オブジェクトの大量データの一括処理を実行できる
  - ジョブ
    - バッチオペレーションの基本単位
  - マニュフェスト
    - 対象オブジェクト


### EBS
- インスタンス
  - 数百マンのトランザクションサポート/１秒
- Amazon DLM
  - Data Lifecycle Manager (Amazon DLM)
  - Amazon EBSのスナップショット取得のライフサイクルポリシーを設定できる
  - EBSのバックアップであるスナップショットの作成、保存、削除を自動化するスケジュールを設定することができる
  - これを利用して、EBSのデータを定期的にバックアップすることができる
- DeleteOnTermination
  - インスタンスを終了すると、EC2 は接続されていた各 EBS ボリュームの DeleteOnTermination 属性 を使用して、ボリュームを存続させるべきか、削除すべきかを判断します
  - デフォルトでは、インスタンスのルートボリュームの DeleteOnTermination属性が有効化されており、EC２インスタンスの削除とともにEBSボリュームも削除されてしまう
  - インスタンスが停止してもルートボリュームを維持したい場合は、ルートボリュームの DeleteOnTermination属性を非有効化することが必要
- EBSのスナップショットはEBSの利用状況に関係なく、非同期に作成することができる
#### スナップショットの共有
- 権限の変更で、他アカウントに移譲することができる
#### ボリュームタイプ
- 汎用SSD
  - 一般的な利用
- プロビジョンドIOPS
  - 性能最も高い
  - 値代が最も高い
  - 10,000IOPSや160MB/s超のワークロード向け
  - io2 Block Expressでは、ボリュームあたりの最大 IOPSが256,000まで可能な高性能なストレージ
  - そのほかのプロビジョンド IOPSでは、ボリュームあたりの最大 IOPSが64,000までが限界となっています。
  - 性能優先の場合
- スループット最適化
  - 値段をやすく高性能を実現
  - コスパ優先の場合
- コールドHDD
  - ログデータなどのアクセス頻度の低いデータのバックアップ
- マグネティック
  - 基本利用しない
#### RAID構成
- RAID0
  - パフォーマンス向上
  - 複数のディスクを一つのディスクとして利用
- RAID1
  - 冗長化
  - 2つのボリュームをミラーリング
#### その他
- ルートデバイス用の EBS ボリューム /dev/xvda を持つ EC2 インスタンスがあり、/dev/sdf を使用して空の EBS ボリュームをインスタンスにアタッチしたとします。インスタンスにAmazon EBSボリュームをアタッチ後に任意のファイルシステムでボリュームをフォーマットしてからマウントすることが必要


### RDS
- マネージドサービス
#### ソフトウェア
- MySQL
  - InnoDBが推奨
- Oracle
- Microsoft SQL server
- PostgreSQL
- Maria
- Aurora
- DBエンジンの切り替えはできない
#### ストレージタイプ
- 汎用
  - SSD
  - 100~10,000IOPS
- プロビジョンドIOPS
  - SSD
  - 1,000~30,000IOPS
- マグネティック
  - HDD
  - 性能はあまり良くない
#### パブリックアクセス
- 基本的にはEC2経由
- 特定のソフトウェアからアクセスしたい場合に、有効化する
- 無効化の方がベター
#### マルチAZ
- 有効化することで瞬時に簡単に構築できる
- 同期でレプリケーション
- 自動フェイルオーバー
- CNAMEレコードがプライマリからセカンダリに移行される
#### リードレプリカ
- マルチAZかマルチリージョンか？ ※要Check
  - マルチAZのRDS構成が基本
  - クロスリージョン（複数リージョン）でリードレプリカ作成
- 最大5つ(Auroraは15個)
- 非同期的なレプリケーションで、レプリケーションデータが遅れることがある
- マスタースレーブ構成
- RDSプロキシー
  - Lambdaを利用してRDSのDBに接続する際は、RDSプロキシをエンドポイントがわりにして接続することで、コネクションを再利用して効率的に実行できる
#### スケーリング
- 読み取り処理が遅い、書き込みが失敗する際にスケーリング
- インスタンスサイズの変更
- インスタンスタイプの変更
- ストレージサイズの変更
- ストレージ容量は自動で増加する
#### ElastiCacheの利用
- 読み取り処理の一部をキャッシュ保持して、高速クエリ処理を実現
#### 暗号化
- 通信の暗号化
- 保管データの暗号化
- インスタンス作成時のみに設定可能
#### モニタリング
- 一応ダッシュボードからメトリクス・ログの確認はできる
- CloudWatchとの連携がデフォルトで設定される
  - 通常は5分間隔
  - **拡張モニタリング**でリアルタイムでモニタリングできる
#### バックアップ
- 手動
- 自動
  - 定期的にスナップショットを取得
  - トランザクションログも取得
  - 増分バックアップ
  - S3に保存
#### その他
- Amazon RDS イベントを利用して、Amazon RDSデータベースにデータが登録されるなどのイベントをトリガーにしてLambda関数やAmazon SQSなどを実行することが可能

#### Aurora
- MySQLとPostgreSQLのみの互換性
- デフォルトでマルチAZ構成
- レプリカを作成することで加えて可用性を高められる
- スナップショットを使ってRDSから復元可能
- フェールオーバー時にレプリカからプライマリーDBに昇格することができます。そして、この各リードレプリカのフェイルオーバー優先度を制御することができます。
  - Auroraの各リードレプリカが優先度層（ティア0〜ティア15）に関連付けられます。 フェイルオーバーが発生した場合、優先度が最も高い（番号が最も小さいティア）リードレプリカをプロモートします。 2つ以上のレプリカの優先度が同じである場合、Auroraは前のプライマリインスタンスと同じサイズのレプリカをプロモートします。
- Amazon Auroraはデフォルトの構成で、マルチAZに分散化される DB クラスターを構成しています。したがって、追加でマルチAZ配置を設定することはできません。
- レプリカは複数リージョンにも展開可能


### ファイルストレージ
#### EFS
- マウントターゲット
  - エンドポイント的な
  - NFSv4プロトコル
- パフォーマンスモード
  - 汎用モード
  - 最大I/Oモード
    - 多くのユーザからの同時アクセス想定
#### Amazon FSx
- 業界標準のファイルストレージを利用したい場合
- for Luster
  - コスト効率が高い
  - 高性能ストレージをコンピューティングワークロード向けに提供する振るマネージドサービス
  - SMBプロトコルを介して共有ファイルにアクセスできるファイルサーバ
  - 高性能MLに適している
  - S3に入出力を保存
  - 機械学習などのデータレイヤで利用が多い
- for Windows
  - ネイティブMicrosoft
  - SMBプロトコル
  - ActiveDirectoryサポート
  - Windowsサービスとの互換性


### DynamoDB
#### ユースケース
- リアルタイムデータ処理などに最適なデータベース
- ビッグデータ処理向け
- 大量データ処理が必要なアプリケーション向け
  - ユーザ行動データ
  - バックエンド管理
#### データ容量制限
- テーブルサイズ無制限
- データサイズ400KB制限
#### 性能
- 結果整合性モデル
  - 一部処理で強い整合性モデルを利用できる
- リードレプリカ機能はない
- **Amazon DynamoDBアクセラレータ（DAX）**
  - DynamoDB用に特化した高可用性インメモリキャッシュ
  - 既存のアーキテクチャよりも、少ない遅延で通信が可能
  - 読み取りの多いワークロードや急激に増大するワークロードに対して、スループットを強化
#### キャパシティモード
- 利用するキャパシティが予測できるか否かでモード選択
- オンデマンドモード
  - キャパシティを自動調整、自動スケーリング
  - 利用量が予測できない場合に利用
- プロビジョニングモード（プロビジョンどスループットモード）
  - テーブルごとのRead／Writeに対して、必要なスループットキャパシティを割り当てる設定
  - あらかじめ予測できる場合に利用
#### インデックス
- 暗黙的なキー（プライマリキー）
  - ハッシュキー
  - レンジキー（複合キー）
- 明示的なキー
  - セカンダリインデックス
  - 暗黙的なキーだけでは検索要件が満たせない場合の設定
#### DynamoDBストリーム
- 他のアプリケーションとトランザクションデータを共有できる
- 過去２４時間以内のデータ変更の履歴を保存し、２４時間を経過すると消去される
- DBへの書き込み処理をトリガーにLambda関数を用いてさまざまな処理を自動化
- DynamoDBテーブルに保存された項目の変更をキャプチャする機能
- ユースケース
  - レプリケーション
    - クロスリージョンレプリケーション
    - ストリームによるキャプチョアをトリガーにして、グローバルなレプリケーションを実施
  - データ更新をトリガーとしたアプリケーション機能
    - ユーザーがデータをDynamoDBテーブルに追加した際に、このイベントを起点にして、データ管理者にメールを送信してDynamoDBの変更を通知するといった機能を作ることができます。
    - Lambdaとの連携とか
#### スケーリング
- 有効にすると、負荷に応じて書き込み容量ユニットと読み込み容量ユニットまたはその両方のスループットを上下できます
- 処理負荷に応じて、テーブルとグローバルセカンダリインデックス（GSI）のパフォーマンス強化を自動化できる
- コスト最適という要件に合致
- デフォルトで有効かされている
- CloudWatchと連動
#### グローバルテーブル
- リージョン間で同期されるマルチマスターテーブル
- データ転送料金が発生
#### その他
- トランザクション機能
  - 書き込み時に機密性の高いデータを削除するといったようなアクションを設定できる
  - 項目の追加、更新、削除といったビジネスワークフローを管理できる
- スロットリング
  - パフォーマンス問題の一つ
  - 要求が多くて追いつかない
- Time-to-Live（TTL）メカニズムにより、アプリケーションのWebセッションを簡単に管理できます
- バックアップ
  - データパイプラインといったサービスを利用してバクアップ


### Elasti Cache
- 使い道
  - Webのセッション情報や一時的なデータ保管場所として
- Redis
  - マルチAZ機能を使用することが出来る
  - 複雑なデータ型
  - インメモリデータセットをソートまたはランク付けが可能
  - 読込処理の負荷に対して、リードレプリカにレプリケートが可能
  - pub/sub機能が可能
  - 自動的なフェイルオーバーが可能
  - キーストアの永続性がある
  - バックアップと復元が可能である
  - 複数のデータベースがサポートされている
  - データ転送時の暗号化、データ保管時の暗号化およびRedis Authによる認証を実施することが可能
-  Memcached
  - シンプルなデータ型
  - マルチスレッドで動作するインメモリキャッシュDB
  - 複数のコアまたはスレッドを持つ大きなノードを実行できる。
  - システムでの需要の増減に応じてノードを追加または削除するスケールアウトおよびスケールイン機能が可能である。
  - データベースなどのオブジェクトをキャッシュできる。
  - キーストアの永続性がない
  - バックアップと復元の機能がない
  - 複数のデータベースを利用できない
  - 保存データの暗号化は利用できません。


### Redshift
- データウェアハウス
- データレイク分析サービス
- 列指向
- 自動でオートスケールはしない
- マルチAZやマルチリーゾンのフェイルオーバーがない
- Redshift Spectrum
  -  S3上に置かれたファイルをロードのための準備をすることなく、高度なクエリを実行することが可能
  -  ユーザが管理するS3バケットに対して直接データ解析を実行可能
- トラフィック制御 
  - 拡張VPCルーティング
    - クラスターとデータリポジトリ間のすべてのCOPYとUNLOADトラフィックがVPCを通るように強制する
    - CloudWatchとかフローログとかのモニタリングをするため
    - ルートテーブルに沿った通信を制御するため
- ワークロードマネジメント
  - ワークロードに応じて複数のキューを設定
  - クエリの実行に優先順位をつけれる
- スケーリング
  - コンピューティングノードの追加、タイプの変更
  - クラスターの追加
- データ連携
  - データ元
    - S3, Kinesis, DynameDB, EMR -> Redshift
    - RDS -> Data pipeline, DMS -> Redshift
  - 連携先
    - Quicksight, S3, MachineLearning, RDS
- Work Load Management（WLM）
  - キューによって分析時のクエリ処理の管理をすることが可能


<!-- #################### -->

## セキュリティ

### IAM
- IAMポリシーの記述方法について
  - ds: = Directory Service
- IAMとSCP
  - IAMユーザーの権限がSCPとIAMの両方で許可されていれば、IAMユーザーは権限が付与された対象リソースの実行が可能となる
  - SCPとIAMポリシー両方の許可で利用ができる
- IAMロールは一時的な権利の委譲にも利用される(監査人へのデータアクセス権利とか)
- IAMデータベース認証
  - DBへの認証をID,PW認証ではなくIAMポリシーで実施する
- IAMアクセスアナライザー
  - 不正なアクセスを監視できる
  - 
### AWS WAF
- - ウェブアプリケーションのファイアウォールであり、CloudFront に転送される HTTP および HTTPS リクエストのモニタリングや、コンテンツへのアクセスのコントロールを可能にする
- マネージドルール作成の時に特定の国のアクセス可否を設定できる
- ①脆弱性を悪用した攻撃からウェブアプリケーションを防御する。＝「ウェブサイトへのアクセスをブロックする」
- ②脆弱性を悪用した攻撃を検出する。＝「外部の悪意のあるIPが明らかになった」

### KMS
- 暗号化鍵の保存、管理
- キーの作成、インポート、ローテーション、削除、管理
- IAMと連携して鍵のアクセス管理を実施
- エンベロープ暗号化
  - マスターキーでデータを直接に`暗号化せずに、マスターキーにより暗号化キーを作成し、その暗号化キーを利用してデータを暗号化する暗号化方式
  - AWS KMS APIを利用してエンベロープ暗号化を実行することができる

### CloudHSM
- クラウドベースのハードウェアセキュリティモジュール (HSM)
- AWS クラウドで暗号化キーを簡単に生成して使用できるようになる
- CloudHSMクラスターは業界標準に沿ったセキュリティに基づいてキーを管理することができるサービス

### シークレットマネージャー
- パスワードなどの資格情報、認証情報、APIキーの管理

### STS
- 一時的な認証情報を与える機能


<!-- #################### -->

## コンテンツ配信

### Cloud Front
- Webコンテンツ配信処理の高速化
- 元のデータを持っているサーバーのことを**オリジンサーバー**と呼ぶ（EC2とか、S3とか）
#### 構成
- S3（オリジンサーバ）の静的Webホスティングに対してCloudFrontを構成
- カスタムオリジン（EC2やELB）
#### 設定
- ディストリビューションについて
  - ドメイン毎に割り当てられるCloudFrontの設定
  - 一般的にはWebディストリビューション
  - HTTPプロトコルを利用したWeb配信を利用する際に設定
- キャッシュの保持期間
  - キャッシュ対象を決定して利用頻度から保持期間を設定する
  - デフォルトTTL…1日
  - 最小TTL
  - 最大TTL
  - ヘッダー
    - Expireヘッダー
      - 期限切れを設定
    - Cache-Control-max-minヘッダー
#### 利用コスト
- リクエスト
- データ転送アウト
#### アクセス制御
- オリジンへのアクセス制限
  - オリジンアクセスID（OAI）
    - S3のBucketへのアクセスをCloudFrontからのみに制限とか
    - OAIと呼ばれるユーザを作成して、そのユーザに限定してアクセスを許可
  - カスタムヘッダー
    - オプション設定で、カスタムオリジンへのアクセスを制限
  - ビューワープロトコルポリシー
  - オリジンプロトコルポリシー
  - オリジンアクセスコントロール (OAC) 
    - 2022年12月より利用可能になったOAIに代わる新機能
    - OAIと同様にオリジンアクセスコントロール (OAC) をCloudFrontディストリビューションに割り当てて、OAIにのみ読み取り権限があるようにS3バケットポリシーを設定することができる
    - CloudFrontはOACを介してS3バケットのコンテンツにアクセスすることになるが、OAIと異なりOACは以下をサポートしていおり、OAIよりも機能が強化されている
      - すべての AWS リージョンのすべての Amazon S3 バケット (2022 年 12 月以降に開始されたオプトインリージョンを含む)
      - AWS KMS による Amazon S3 サーバー側の暗号化 (SSE-KMS)
      - Amazon S3 に対する動的なリクエスト (PUT と DELETE)
#### キャッシュへのアクセス制御
- 署名付きURL
  - 署名付きのURLからしかアクセスできない
  - 個別のファイルへのアクセスを制限するときに利用
- 署名付きCookie
  - 署名付きのCookieからしかアクセスできない
  - 複数の制限されたファイルへのアクセスを提供したいとき
  -  URLの変更をしたくないとき
#### 地域制限
- 配信設定で地域制限を有効化
- 国・地域へのアクセスを限定
- 地理的ブロッキング機能
  - 特定地域のユーザによるアクセスを回避できる
#### セキュリティ
- AWS WAFを用いたファイアヤーウォール連携
- AWS ShieldによるDDoS攻撃防御
- DloudFrontによるアクセスログ
#### その他
- セキュリティグループやネットワークACLは存在しない
  - ウェブACLは存在する
- ストリーミング配信にも対応
#### その他
- gzipとかに圧縮して配信することで高速化を実現
- max-ageディレクティブが低いとキャッシュへの確認サイクルが短くなり、オリジンサーバーへの確認回数が増加します。
- リージョナルエッジキャッシュ
  - オリジンサーバとエッジロケーションの中間に位置して、コンテンツをキャッシュする

<!-- #################### -->

## メッセージング

### SNS
- Pub/Subメッセージング
- Push型
- メール通知やプッシュ通知
- サポートされているプロトコルおよびサービス
  - Amazon SQS
  - AWS Lambda
  - HTTP、HTTPS
  - Eメール
  - モバイルプッシュ通知
  - モバイルテキストメッセージ (SMS)

### SES
- email機能

### MQ
- 業界標準APIやメッセージングプロトコルを使用
- ActiveMQとの互換性
- クラウド内のメッセージブローカーの設定と操作が簡単なApache ActiveMQのマネージドメッセージブローカーサービス
- 既存のアプリケーションでメッセージングを使用していて、メッセージングサービスを迅速かつ容易にクラウドに移行したい場合
- 業界標準のAPIとプロトコルをサポート

### SQS
- タスクのキューによる非同期処理
- 水平スケーリングができる
- メッセージ数無制限
- メッセージサイズ最大256kB
- メッセージ保持期間をうまく設定する必要がある（デフォルト4日、最小60秒、最大14日）
- 標準キュー
 - メッセージ取得は「少なくとも一回の配信」であり、メッセージの順番もコピーが「順不同」で配信される可能性がある
- FIFOキュー
 - 「一回だけの配信」と「FIFOに則った順序」で配信される
 - 標準キューよりも利用コストが高く、１秒間あたりのトランザクション（処理回数）は制限される
- 可視性タイムアウト
  - 処理担当のインスタンス以外からは一定時間キューが見えなくなる
  - 他のコンシューマが処理しないように（重複処理をしないように）二重に取得しない待機時間を設定する
- ポーリング方式（ロングかショートか）
- キューの詳細設定
  - 遅延キュー
    - 新しいメッセージ配信を数秒遅らせられる
    - 全キューに影響
  - 優先度キュー
    - 処理の優先度をつけられる
  - デッドレターキュー 
    - 正常に処理されなかった場合、レッドレター用の別のキューに移動
    - 処理不能のキューが溜まってしまうのを防ぎ、原因を後から解析できる
- バッチアクション
  - 一回のアクションで複数のメッセージを操作するなどのバッチ処理が可能

### API Gateway
- スロットリング制限設定
- キャッシュ
  - APIキャッシュを有効にすると、エンドポイントの応答をキャッシュして効率的な処理が可能となります。キャッシュを使用すると、エンドポイントに対して行われるAPIリクエスト数を減らし、APIリクエストに対するレイテンシーを改善することもできます。
  -  APIキャッシングのデフォルトのTTL値は300秒です。最大TTL値は3600秒です。 TTL = 0は、キャッシュが無効になっていることを意味します。




<!-- #################### -->

## その他

### Storage Gateway
- オンプレミス環境のストレージをAmazonS3に接続して拡張するサービス
- オンプレミスにデータベースを有しながらAWSの機能や性能を活用できる
#### 用途
- データ移転や保存などでAWSストレージを利用したい
- バックアップ、アーカイブ、災害対策
#### タイプの選択
- ファイルゲートウェイ
  - SMBかNFSプロトコル
  - オンプレミスのデータをバックアップ処理したい
  - ファイルゲートウェイハードウェアアプライアンス
    - サーバや仮想環境がない場合、ファイルサーバとしてセットアップ
- ボリュームゲートウェイ
  - AWS Buckupを利用したデータ保護
  - AWSへのストレージ拡張
  - キャッシュ型
    - S3がプライマリー
    - 高頻度アクセスのデータをローカルにキャッシュ
    - バックアップ
  - 保管型
    - オンプレミスがプライマリー
    - ローカルデータを非同期にS3にバックアップ
- テープ
  - 仮想テープライブラリとして利用

### データ移行
- VPN… セキュア、迅速
  - AWS VPN CloudHub
    - 複数のAWSサイト間VPN接続がある場合は、AWS VPN CloudHubを使用してサイト間の安全な通信を提供できる
- Snowball… 大量、１週間、一つ80TB
- Direct Connect… セキュア、準備遅い
- DataSyncとは
  - S3、EFSにストレージデータを移行する際に利用
  - ストレージ間、オンプレクラウド間も可能

- Snowball
  -  S3への移行の際は、まずS3に移してそこからGlacierにライフサイクルポリシーで移動させる
  -  Snowball Edge Storage Optimizedは100TBの容量がありますが、利用可能な領域は80TB


### AWS Elastic Beanstalk
- Java、.NET、PHP、Node.js、Python、Ruby、Go および Docker を使用して開発されたウェブアプリケーションやサービスを、Apache、Nginx、Passenger、IIS など使い慣れたサーバーでデプロイおよびスケーリングするためのサービス

### Cloud Watch
- 通常のモニタリング間隔は5分
- カスタムメトリクス周り 
  - CloudWatchのデフォルトで用意されている監視項目には以下のようなものがあります。
    ・CPU Utilization(CPU使用率)
    ・Disk Reads(ディスク読み込み状況)
    ・Disk Writes(ディスク書き込み状況)
    ・Network In,Out(ネットワーク状況)
    ・Status Check Failed(インスタンスのステータスチェック失敗)
- 中央ロギング
  - VPCフローログ
    - VPCのネットワークインターフェースのトラフィック情報をキャプチャ
    - CloudWatchで集約してロギング
  - CloudWatchエージェント


### AWS Backup
- AWSのサービス全体でデータ保護を一元化および自動化
- 費用効果が高く、ポリシーベースのフルマネージドサービスを提供し、大規模なデータ保護をさらに簡素化します


### Amazon Kinesis
#### Amazon Kinesis Data Streams
- ストリーミングデータを処理するアプリケーションを構築
- シャード
  - データを処理する単位
  - １シャード1MB/sのインプットと2MB/sのアウトプット
- レコード
  - データ単位  
- データ保持期間24時間
- バッチ間隔や暗号化を調整できる
- リシャーディング（Kinesisのスケーリング）
  - シャードの分割と結合という2種類のオペレーション
  - 分割
    - 1つのシャードを2つに分ける
    - ストリームのデータ用用は増えるが、コストも増える
  - 結合
    - 2つのシャードを1つに組み合わせる
    - ストリームのデータ容量とコストは減る
  - ホットシャード
    - 予想より遥かに多いデータを受信するシャード
    - 分割して容量を増やす
  - コールドシャード
    - 遥かに少ないデータを受信するシャード
    - マージして未使用の容量を有効的に活用
- 拡張ファンアウト
  - 使用するコンシューマーを構築できる
  - コンシューマーは、シャードあたり 1 秒間に最大 2 MB のデータのスループットで、ストリームからレコードを受け取ることができる
  - これにより、コンシューマーはスループット性能を向上させることができる
#### Amazon Kinesis Data Firehose
- ストリーミングデータをS3やRedshiftに変換・配信
- ETLとして機能も可能
- 主な配信先（S3, Redshift, ElasticSearch, OpenSsearch Service）
#### Amazon Kinesis Data Analytics
- ストリーミングデータを標準的なSQLクエリでリアルタイムに分析・可視化
- データ配信の際にAmazon Kinesis Data AnalyticsからKinesis Data Firehoseを経由する必要はない


### Data Pipeline
- 保存場所にあるお客様のデータに定期的にアクセスし、必要なスケールのリソースで変換と処理を行い、その結果を Amazon S3、Amazon RDS、Amazon DynamoDB、Amazon EMR のような AWS サービスに効率的に転送できる

### AWS App Sync
- DynamoDBテーブルやLambda関数などをデータソースとしたAPIを作成できるサービス
- 同じくAPIを作成できるAPI Gatewayとは異なり、AppSyncではGraphQLインターフェースのAPIを作成できる
- DynamoDBとAppSyncとを連携して、リアルタイム処理機能を実装することが可能

### AWS SAM
- サーバーレスアプリケーション構築用のデプロイツール
- YAMLを使用して、サーバレスアプリケーションのLambda関数、API、データベース、イベントソースマッピングをモデリング
- AWS SAMはCloudFormationと連携してサーバレスアプリケーションを展開

### AD Connector
- IAMとオンプレミス環境のADを連携するのに利用
- AD ConnectorはIAM側のディレクトリ・リクエストをオンプレミスの Microsoft Active Directory へとリダイレクトするのに使用するディレクトリゲートウェイ
- 社内のActive DirectoryとIAMとを連携することができます。

### Cloud Formation
- ドリフト
  - CloudFormationテンプレートとそれによって展開したリソースとの間の乖離
  - スタックでドリフト検出オペレーションを実行すると、スタックが予想されるテンプレート設定からドリフトが発生しているかを検証することができる
- スタックセット
  - 複数のアカウントと複数のリージョンに対してスタックを作成できる機能

### ECS
- 課金方式
  - EC2起動タイプ
    - 使用されたEC2インスタンスとEBSボリュームに基づいて課金
  - Fargate起動タイプ
    - コンテナ化されたアプリケーションが要求するvCPUとメモリリソースに基づいて課金
- タスク定義
  - タスクのリソース使用量や、タスクで実行するdockerコンテナの情報などを決めることができる
  - 別のタスクロール用のコンテナーには別のタスク定義を作成することが必要
- タスク定義
  - 特定のタスクの権限を指定する
  - タスク定義を作成するとき、またはAWSCLIまたはSDKを使用してIAMタスクロールオーバーライドを使用することによってタスクに適用できる
  - taskRoleArnパラメーターをポリシーを指定するために使用

### Organizations
- SCP
  - ユーザーまたはロールに対して、SCPによって許可されていない範囲のIAMアクセス許可ポリシーを設定しても、そのアクションを実行できない
  - AWSアカウントに紐づいたユーザーに対する許可範囲を設定
  - デフォルトでメンバーアカウントが属するOUに対して「FullAWSAccess」が付与されることになっている

### AD
- ウェブ ID フェデレーションを使用すると、アプリのユーザーは外部 ID プロバイダー (IdP) (例: Login with Amazon、Facebook、Google などの OpenID Connect (OIDC) 互換の IdP) を使用してサインインすることができます。 

### Amazon Cognito
- ウェブアプリケーションおよびモバイルアプリに素早く簡単にユーザーのサインアップ/サインインおよびアクセスコントロールの機能を追加でき

### Step function
- 開発者が並行または順次のステップを持つワークフローを作成して、Lambda関数や複数のAWSリソースを連携させてプロセスを作ることができる

#### Amazon EventBridge
- AWS サービスを自動化して、アプリケーションの可用性の問題やリソースの変更などのシステムイベントに自動的に応答する機能を作成できます。


<!-- #################### -->

復習ポイント
- EC2
  - ブートストラップ
  - ゴールデンイメージ
  - Dedicated Host
  - Elastic Fablic Adapter
  - インスタンスにパブリック IPv4 アドレスが割り当てられている場合、そのパブリック IPv4 アドレスは復旧後も維持される
-  VPC
  - インスタンスをデフォルトのVPCで起動すると、インスタンスのパブリックIPv4アドレスとプライベートIPv4アドレスに対応するパブリックDNSホスト名とプライベートDNSホスト名がインスタンスに提供される
  - サブネットはVPCのメインルートテーブルに自動的に関連付けられる
  - ENIのウォームタッチ
- S3
  - クロスオリジンリソースシェアリングの概念をもう一度
  - 大量のリクエストに対するパフォーマンス効率の向上の方法は、カスタムプレフィックス
- ELB
  - VPCフローログをELBで有効化することでELBとの間で送受信されるトラフィックの詳細情報をキャプチャすることができる
- AutoScaling
  - Auto Scalingはスケールインを実行する際に、ライフサイクルフックを利用してインスタンス終了時のアクションを実行することができる
  - EC2ヘルスチェックの状態
- RDS
  - DB インスタンスのトランザクションログを 5 分ごとに Amazon S3 にアップロードします。RDSはスナップショットとトランザクションログを利用して直近５分前からデータベースを復元することができる
- EBS
  - HDDタイプはブートボリュームに設定できない
  - 増分スナップショットですが、最新のスナップショット以外を削除しても最新のスナップショットだけでEBSを復元できる
  - EBSボリュームは同じアベイラビリティーゾーン内のEC2インスタンスにしかアタッチできない
- ELB
  - ELBは、異なるリージョンに展開されたターゲットの着信トラフィックを分散できない
  - NLBではインスタンス ID を使用してターゲットを指定すると、トラフィックはインスタンスのプライマリネットワークインターフェイスで指定される
  - クロスゾーンバランシング
    - AZの均衡を保たずにバランシングを行う
- SQS
  - 特定のメッセージの配信延期にはメッセージタイマー
  - SQSは最長メッセージ保持期間を超えるキューに残っているメッセージを自動的に削除します。 デフォルトのメッセージ保持期間は 4 日間です。
- Cloudfront
  - プロキシHTTPメソッド PUT/POST/PATCH/OPTIONS/DELETE は POP からオリジンに直接送信される
  - オリジンがELBではない場合は、ACMの設定が不可能となります。その場合は、信頼されたサードパーティーの証明書を Amazon CloudFront に設定する
- DynamoDB
  - プロビジョニングモードでDynamoDBを利用している場合にはDynamoDBは自動的にスケーリングしない
  - Amazon DynamoDBテーブルのポイントインタイムリカバリを使用して連続バックアップを有効にすることができます。ポイントインタイムリカバリを有効化すれば、誤って本稼働環境の DynamoDB テーブルに書き込みを行ったとしても、過去 35 日間の任意の時点にテーブルを復元することができます。DynamoDB は、選択された日時 (day:hour:minute:second) に基づく状態でテーブルデータを新しいテーブルに復元します。DynamoDB では、テーブルの増分バックアップが維持されます。
- CloudHSM
- AD系の問題
- Kinesis
  - Kinesis Data Streamsは一連のデータレコードを持つシャードのセットであり、各データレコードにはKinesis Data Streamsによって割り当てられたシーケンス番号があるため、 メッセージが失われず、重複されず、到着と同じ順序で伝送することが可能です。
  - データ保持期間はデフォルト24 時間で、最大値は 168時間
  
